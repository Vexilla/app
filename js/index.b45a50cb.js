(function(e){function t(t){for(var o,a,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);f&&f(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},a={index:0},i={index:0},r=[];function c(e){return s.p+"js/"+({configuration:"configuration","environment~feature":"environment~feature",environment:"environment",feature:"feature"}[e]||e)+"."+{configuration:"3e235548","environment~feature":"f907ab5c",environment:"a90c8f67",feature:"8faca580"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={configuration:1,"environment~feature":1,environment:1,feature:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="css/"+({configuration:"configuration","environment~feature":"environment~feature",environment:"environment",feature:"feature"}[e]||e)+"."+{configuration:"026a8cbb","environment~feature":"4ba4518e",environment:"10cfd211",feature:"d32344d2"}[e]+".css",i=s.p+o,r=document.getElementsByTagName("link"),c=0;c<r.length;c++){var u=r[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===o||l===i))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===o||l===i)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||i,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete a[e],f.parentNode.removeChild(f),n(r)},f.href=i;var g=document.getElementsByTagName("head")[0];g.appendChild(f)})).then((function(){a[e]=0})));var o=i[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,n){o=i[e]=[t,n]}));t.push(o[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",d.name="ChunkLoadError",d.type=o,d.request=a,n[1](d)}i[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/app/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;r.push([2,"chunk-vendors"]),n()})({0:function(e,t){},"08d9":function(e,t,n){"use strict";n("3111")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},2:function(e,t,n){e.exports=n("cd49")},3:function(e,t){},3111:function(e,t,n){},4:function(e,t){},"404e":function(e,t,n){},5:function(e,t){},"59ef":function(e,t,n){},6:function(e,t){},7:function(e,t){},"79b7":function(e,t,n){"use strict";n("dfbd")},8:function(e,t){},"84df":function(e,t,n){},"8a03":function(e,t,n){"use strict";n("59ef")},9:function(e,t){},"9f0d":function(e,t,n){"use strict";n("404e")},b190:function(e,t,n){},b9b4:function(e,t,n){"use strict";n("b190")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),a={class:"header"},i=Object(o["g"])('<a href="/" class="header-link"><h1 class="header-heading"><span class="logo-wrapper"><img class="logo-image" src="img/logo-white.svg"></span><span class="app-title"> Vexilla </span></h1></a><nav class="header-nav"><a class="nav-link" href="/documentation">Documentation </a></nav>',2),r={class:"publish-row"},c={class:"status-wrapper"},s=Object(o["i"])("span",{class:"status-message error"}," Config is invalid ",-1),u={key:0,class:"status-message"},l={key:1,class:"status-message blue"},d={class:"layout"},f={class:"page-wrapper"};function g(e,t,n,g,m,p){var b,v,h,O,j,y,w,S,k,E,F,C,x=Object(o["z"])("Modal"),I=Object(o["z"])("router-link"),N=Object(o["z"])("Icon"),A=Object(o["z"])("Sidebar"),R=Object(o["z"])("router-view");return Object(o["s"])(),Object(o["e"])(o["a"],null,[Object(o["i"])(x),Object(o["i"])("header",a,[i,Object(o["i"])("div",r,[Object(o["i"])("div",c,[Object(o["i"])("div",null,[e.configIsValid()?Object(o["f"])("",!0):(Object(o["s"])(),Object(o["e"])(I,{key:0,class:"status-link",to:"/configuration"},{default:Object(o["I"])((function(){return[s]})),_:1}))]),e.dataHasChanged()?Object(o["f"])("",!0):(Object(o["s"])(),Object(o["e"])("span",u," No changes to push. ")),e.dataHasChanged()?(Object(o["s"])(),Object(o["e"])("span",l," Changes to push. ")):Object(o["f"])("",!0),null===(b=e.hosting)||void 0===b||null===(v=b.status)||void 0===v||!v.message||null!==(h=e.hosting)&&void 0!==h&&null!==(O=h.status)&&void 0!==O&&O.route?Object(o["f"])("",!0):(Object(o["s"])(),Object(o["e"])("span",{key:2,class:["status-message",null===(j=e.hosting)||void 0===j||null===(y=j.status)||void 0===y?void 0:y.type]},Object(o["B"])(null===(w=e.hosting)||void 0===w||null===(S=w.status)||void 0===S?void 0:S.message),3)),null!==(k=e.hosting)&&void 0!==k&&null!==(E=k.status)&&void 0!==E&&E.route?(Object(o["s"])(),Object(o["e"])(I,{key:3,class:"status-link",to:null===(F=e.hosting)||void 0===F||null===(C=F.status)||void 0===C?void 0:C.route},{default:Object(o["I"])((function(){var t,n,a,i;return[Object(o["i"])("span",{class:["status-message",null===(t=e.hosting)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.type]},Object(o["B"])(null===(a=e.hosting)||void 0===a||null===(i=a.status)||void 0===i?void 0:i.message),3)]})),_:1},8,["to"])):Object(o["f"])("",!0)]),Object(o["i"])("button",{class:"mobile-menu-button",onClick:t[1]||(t[1]=function(){return e.toggleSidebarShowing&&e.toggleSidebarShowing.apply(e,arguments)})},[e.sidebarShowing?Object(o["f"])("",!0):(Object(o["s"])(),Object(o["e"])(N,{key:0,icon:e.icons.openMenu},null,8,["icon"])),e.sidebarShowing?(Object(o["s"])(),Object(o["e"])(N,{key:1,icon:e.icons.closeMenu},null,8,["icon"])):Object(o["f"])("",!0)])])]),Object(o["i"])("div",d,[Object(o["i"])(A),Object(o["i"])("div",f,[Object(o["i"])(R)])])],64)}n("96cf");var m=n("1da1"),p=n("5530"),b=n("c850"),v=n("509f"),h=n("1294"),O=n("2c29"),j=Object(o["L"])("data-v-3e175bbc");Object(o["v"])("data-v-3e175bbc");var y={class:"toolbar"},w={class:"status-wrapper"},S=Object(o["i"])("span",{class:"status-message error"}," Config is invalid ",-1),k={key:0,class:"status-message"},E={class:"publish-row"},F=Object(o["i"])("span",{class:"sr-only","aria-hidden":"true"},"Download features.json",-1),C=Object(o["i"])("span",{class:"sr-only","aria-hidden":"true"}," Copy features.json to clipboard ",-1),x=Object(o["h"])(" Publish "),I=Object(o["h"])(" Configuration "),N=Object(o["i"])("span",null," > ",-1),A=Object(o["i"])("hr",{class:"separator"},null,-1);Object(o["t"])();var R=j((function(e,t,n,a,i,r){var c,s,u,l,d,f,g,m,p,b,v,h,O,R,M,V,T,L,H=Object(o["z"])("router-link"),P=Object(o["z"])("Icon"),_=Object(o["z"])("ManageList");return Object(o["s"])(),Object(o["e"])("div",{class:["sidebar",{showing:e.sidebarShowing}]},[Object(o["i"])("div",y,[Object(o["i"])("div",w,[Object(o["i"])("div",null,[e.configIsValid()?Object(o["f"])("",!0):(Object(o["s"])(),Object(o["e"])(H,{key:0,class:"status-link",to:"/configuration"},{default:j((function(){return[S]})),_:1}))]),e.dataHasChanged()?Object(o["f"])("",!0):(Object(o["s"])(),Object(o["e"])("span",k," No changes to push. ")),null===(c=e.hosting)||void 0===c||null===(s=c.status)||void 0===s||!s.message||null!==(u=e.hosting)&&void 0!==u&&null!==(l=u.status)&&void 0!==l&&l.route?Object(o["f"])("",!0):(Object(o["s"])(),Object(o["e"])("span",{key:1,class:["status-message",null===(d=e.hosting)||void 0===d||null===(f=d.status)||void 0===f?void 0:f.type]},Object(o["B"])(null===(g=e.hosting)||void 0===g||null===(m=g.status)||void 0===m?void 0:m.message),3)),null!==(p=e.hosting)&&void 0!==p&&null!==(b=p.status)&&void 0!==b&&b.message&&null!==(v=e.hosting)&&void 0!==v&&null!==(h=v.status)&&void 0!==h&&h.route?(Object(o["s"])(),Object(o["e"])(H,{key:2,class:"status-link",to:null===(O=e.hosting)||void 0===O||null===(R=O.status)||void 0===R?void 0:R.route},{default:j((function(){var t,n,a,i;return[Object(o["i"])("span",{class:["status-message",null===(t=e.hosting)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.type]},Object(o["B"])(null===(a=e.hosting)||void 0===a||null===(i=a.status)||void 0===i?void 0:i.message),3)]})),_:1},8,["to"])):Object(o["f"])("",!0)]),Object(o["i"])("div",E,[Object(o["i"])("button",{class:"icon-button",onClick:t[1]||(t[1]=function(t){return e.exportJson()}),title:"Download JSON","aria-label":"Download features.json"},[Object(o["i"])(P,{class:"icon",icon:e.icons.download},null,8,["icon"]),F]),Object(o["i"])("button",{class:"icon-button",onClick:t[2]||(t[2]=function(t){return e.copyJson()}),title:"Copy JSON","aria-label":"Copy features.json to clipboard"},[Object(o["i"])(P,{class:"icon",icon:e.icons.copy},null,8,["icon"]),C]),Object(o["i"])("button",{disabled:!e.dataHasChanged()||!e.configIsValid()||(null===(M=e.hosting)||void 0===M||null===(V=M.status)||void 0===V?void 0:V.type)===e.HostingStatusType.ERROR,onClick:t[3]||(t[3]=function(t){return e.publishChanges()})},[Object(o["i"])(P,{class:"icon",icon:e.icons.upload},null,8,["icon"]),x],8,["disabled"])]),Object(o["i"])(H,{to:"/configuration",class:"config-link",onClick:t[4]||(t[4]=function(t){return e.goToConfig(t)})},{default:j((function(){return[Object(o["i"])("span",null,[Object(o["i"])(P,{icon:e.icons.settings,class:"logo"},null,8,["icon"]),I]),N]})),_:1})]),Object(o["i"])("h2",null,"Environments ("+Object(o["B"])(null===(T=e.environments)||void 0===T?void 0:T.length)+")",1),Object(o["i"])(_,{"item-label":"Environment",namedRoute:"Environment",list:e.environments,onItemAdded:e.addEnvironment,onItemRemoved:e.removeEnvironment,onNavigated:e.toggleSidebarShowing},null,8,["list","onItemAdded","onItemRemoved","onNavigated"]),A,Object(o["i"])("h2",null,"Features ("+Object(o["B"])(null===(L=e.features)||void 0===L?void 0:L.length)+")",1),Object(o["i"])(_,{"item-label":"Feature",namedRoute:"Feature",list:e.features,onItemAdded:e.addFeature,onItemRemoved:e.removeFeature,onNavigated:e.toggleSidebarShowing},null,8,["list","onItemAdded","onItemRemoved","onNavigated"])],2)})),M=(n("b0c0"),Object(o["L"])("data-v-f14dacc2"));Object(o["v"])("data-v-f14dacc2");var V={class:"manage-list"},T={class:"input-button-combo"},L={type:"submit"},H={class:"list"},P={class:"item-name"};Object(o["t"])();var _=M((function(e,t,n,a,i,r){var c=Object(o["z"])("Icon"),s=Object(o["z"])("router-link");return Object(o["s"])(),Object(o["e"])("div",V,[Object(o["i"])("form",{onSubmit:t[2]||(t[2]=Object(o["K"])((function(t){return e.addItem()}),["prevent"]))},[Object(o["i"])("label",null," Add "+Object(o["B"])(e.itemLabel),1),Object(o["i"])("div",T,[Object(o["J"])(Object(o["i"])("input",{placeholder:"Add "+e.itemLabel,type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.inputText=t}),ref:"inputField"},null,8,["placeholder"]),[[o["F"],e.inputText]]),Object(o["i"])("button",L,[Object(o["i"])(c,{icon:e.icons.plus},null,8,["icon"])])])],32),Object(o["i"])("ul",H,[(Object(o["s"])(!0),Object(o["e"])(o["a"],null,Object(o["y"])(e.list,(function(t){return Object(o["s"])(),Object(o["e"])("li",{key:null===t||void 0===t?void 0:t.name,class:"item"},[Object(o["i"])(s,{to:{name:e.namedRoute,params:{name:t.name}},class:"item-link",title:null===t||void 0===t?void 0:t.name},{default:M((function(){return[Object(o["i"])("h3",P,Object(o["B"])(null===t||void 0===t?void 0:t.name),1)]})),_:2},1032,["to","title"]),Object(o["i"])("button",{class:"delete-button",onClick:function(n){return e.removeItem(t)}},[Object(o["i"])(c,{icon:e.icons.remove},null,8,["icon"])],8,["onClick"])])})),128))])])})),B=(n("7db0"),n("3698")),$=n("3eba"),D=Object(o["j"])({name:"ManageList",data:function(){return{inputText:"",icons:{plus:B["a"],remove:$["a"]}}},props:{itemLabel:String,list:Array,namedRoute:String},components:{Icon:b["a"]},methods:{addItem:function(){var e=this;if(this.inputText){var t,n=null===(t=this.list)||void 0===t?void 0:t.find((function(t){return t.name===e.inputText}));if(n)return;this.$emit("item-added",{name:this.inputText}),this.inputText=null}},removeItem:function(e){this.$emit("item-removed",e)}}});n("b9b4");D.render=_,D.__scopeId="data-v-f14dacc2";var z,J=D,K=n("5502"),W=n("e6ce"),G=n("9f5f"),U=n("5f62"),q=n("ef19"),Y=n("21a6"),Q=n("d576"),X=(n("99af"),n("4160"),n("d3b7"),n("159b"),n("d4ec")),Z=n("bee2"),ee=n("4a9d"),te=n("bc3a"),ne=n.n(te),oe=function(){function e(){Object(X["a"])(this,e)}return Object(Z["a"])(e,null,[{key:"fetchFeatures",value:function(e){var t="https://".concat(e.bucketName,".s3.amazonaws.com/features.json");return ne.a.get(t).catch((function(e){return console.log("Error fetching Features"),"foo"}))}},{key:"isConfigValid",value:function(e){return!(!e.region||!e.bucketName||!e.accessKeyId||!e.secretAccessKey)}},{key:"upload",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadWithOldSDK(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"uploadWithOldSDK",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){var o,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new ee["S3"]({credentials:{accessKeyId:n.accessKeyId,secretAccessKey:n.secretAccessKey}}),a={ACL:"public-read",Body:JSON.stringify(t),Bucket:n.bucketName,Key:"features.json"},e.next=4,o.putObject(a).promise().catch((function(e){console.log(e,e.stack)}));case 4:return i=e.sent,console.log("Success: ",i),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}(),ae=(n("c19f"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("6bd1")),ie=function(){function e(){Object(X["a"])(this,e)}return Object(Z["a"])(e,null,[{key:"fetchFeatures",value:function(e){var t="".concat(e.remoteUrl,"features.json");return ne.a.get(t).catch((function(e){return console.log("Error fetching Features"),"foo"}))}},{key:"isConfigValid",value:function(e){return!(!e.remoteUrl||!e.container||!e.storageAccount||!e.sharedAccessSignature)}},{key:"upload",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){var o,a,i,r,c,s,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(o=new ae["a"](n.sharedAccessSignature),a=o.getContainerClient(n.container),i=a.getBlockBlobClient("features.json"),r=JSON.stringify(t),c=new ArrayBuffer(r.length),s=new Uint8Array(c),u=0,l=r.length;u<l;u++)s[u]=r.charCodeAt(u);return e.abrupt("return",i.uploadData(c));case 8:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}(),re=function(){function e(){Object(X["a"])(this,e)}return Object(Z["a"])(e,null,[{key:"fetchFeatures",value:function(e){throw new Error("fetchFeatures not implemented")}},{key:"isConfigValid",value:function(e){throw new Error("isConfigValid is not implemented.")}},{key:"upload",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Gcloud upload not implemented");case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}(),ce=n("d485"),se=function(){function e(){Object(X["a"])(this,e)}return Object(Z["a"])(e,null,[{key:"fetchFeatures",value:function(e){}},{key:"isConfigValid",value:function(e){return!0}},{key:"upload",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ne.a.post("https://storage.googleapis.com/upload/storage/v1/b/".concat(n.bucketName,"/o?name=features.json&uploadType=media&key=").concat(n.apiKey),t).then((function(e){return console.log({result:e}),e}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"writeWritableStream",value:function(e,t){return new Promise((function(n,o){console.log("made it into writeWriteable"),ce["Readable"].from(t).pipe(e).on("error",(function(e){console.log("error in stream"),o(e)})).on("finish",(function(){console.log("stream finished"),n("success")}))}))}}]),e}();(function(e){e["NORMAL"]="normal",e["ERROR"]="error",e["WARNING"]="warning"})(z||(z={}));var ue=function(){function e(){Object(X["a"])(this,e)}return Object(Z["a"])(e,null,[{key:"upload",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.provider||!n.config){e.next=5;break}return o=this.adapters[n.provider],e.abrupt("return",o.upload(t,n.config));case 5:throw new Error("No config.provider passed to upload");case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"formatPayloadFromState",value:function(e){var t={environments:{}};return e.environments.forEach((function(n){t.environments[n.name]={untagged:{}},e.features.forEach((function(o){var a=Object(p["a"])(Object(p["a"])({},e.featuresSettings["".concat(o.name,"/").concat(n.name,"/").concat(o.type)]),{},{type:o.type});t.environments[n.name].untagged[o.name]=Object(p["a"])({},a)}))})),t}},{key:"extractStateFromPayload",value:function(e){throw new Error("Method not implemented")}},{key:"isConfigValid",value:function(e){if(null!==e&&void 0!==e&&e.provider&&null!==e&&void 0!==e&&e.config){var t=this.adapters[e.provider];return t.isConfigValid(e.config)}return console.log("No Adapter"),!1}},{key:"fetchExistingFeatures",value:function(e){if(null!==e&&void 0!==e&&e.provider&&null!==e&&void 0!==e&&e.config){var t=this.adapters[e.provider];return t.fetchFeatures(e.config)}return console.log("No Adapter"),Promise.resolve(!1)}}]),e}();ue.adapters={s3:oe,azure:ie,gcloud:re,firebase:se};var le=Object(o["j"])({name:"Sidebar",data:function(){return{HostingStatusType:z,icons:{settings:W["a"],upload:G["a"],download:U["a"],copy:q["a"]}}},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(K["d"])("app",["environments","features","hosting"])),Object(K["d"])("ui",["sidebarShowing"])),Object(K["c"])("app",["configIsValid","dataHasChanged"])),methods:Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(K["b"])("app",["addEnvironment","removeEnvironment","addFeature","removeFeature"])),Object(K["b"])("ui",["toggleSidebarShowing","setSidebarShowing"])),{},{goToConfig:function(e){console.log("event",e),e.preventDefault(),this.$router.push("/configuration"),this.toggleSidebarShowing()},publishChanges:function(){var e=this.$store.state.app,t=ue.formatPayloadFromState(e);ue.upload(t,e.hosting),this.$store.dispatch("app/setExistingFeatures",t)},exportJson:function(){var e=this.$store.state.app,t=ue.formatPayloadFromState(e);Object(Y["saveAs"])(new Blob([JSON.stringify(t)],{type:"application/json"}),"features.json")},copyJson:function(){var e=this,t=this.$store.state.app,n=ue.formatPayloadFromState(t);Q["a"](JSON.stringify(n,null,2));var o=this.$store.state.app.hosting.status;console.log("current",JSON.parse(JSON.stringify(o)));var a="Config copied to clipboard.";this.$store.dispatch("app/setHostingStatus",{message:a,type:z.NORMAL}),setTimeout((function(){var t=e.$store.state.app.hosting.status;console.log("latest",JSON.parse(JSON.stringify(t))),t.message===a&&e.$store.dispatch("app/setHostingStatus",Object(p["a"])({},o))}),3e3)}}),components:{ManageList:J,Icon:b["a"]}});n("9f0d");le.render=R,le.__scopeId="data-v-3e175bbc";var de=le,fe=Object(o["L"])("data-v-a7973084");Object(o["v"])("data-v-a7973084");var ge={key:0,class:"backdrop"},me={class:"modal-wrapper"},pe={class:"modal"},be={key:0,class:"inactivity-warning modal-content-wrapper"},ve=Object(o["i"])("div",{class:"modal-content"},[Object(o["i"])("h2",{class:"modal-title"},"Warning!"),Object(o["i"])("p",null," You have been idle for more than 10 minutes. We have paused the data sync loop. ")],-1),he={class:"actions"};Object(o["t"])();var Oe,je=fe((function(e,t,n,a,i,r){return e.modalShowing?(Object(o["s"])(),Object(o["e"])("div",ge,[Object(o["i"])("div",me,[Object(o["i"])("div",pe,[e.currentModal===e.ModalName.InactivityWarning?(Object(o["s"])(),Object(o["e"])("div",be,[ve,Object(o["i"])("div",he,[Object(o["i"])("button",{onClick:t[1]||(t[1]=function(t){return e.resumeSyncLoop()})},"Resume Loop")])])):Object(o["f"])("",!0)])])])):Object(o["f"])("",!0)}));(function(e){e["None"]="None",e["InactivityWarning"]="InactivityWarning"})(Oe||(Oe={}));var ye={namespaced:!0,state:{sidebarShowing:!1,modalShowing:!0,currentModal:Oe.InactivityWarning},mutations:{setSidebarShowing:function(e,t){e.sidebarShowing=t},toggleSidebarShowing:function(e,t){e.sidebarShowing=!e.sidebarShowing},setModalShowing:function(e,t){e.modalShowing=t},setCurrentModal:function(e,t){e.currentModal=t}},actions:{setSidebarShowing:function(e,t){e.commit("setSidebarShowing",t)},toggleSidebarShowing:function(e){e.commit("toggleSidebarShowing")},setModalShowing:function(e,t){e.commit("setModalShowing",t)},setCurrentModal:function(e,t){e.commit("setCurrentModal",t)}}},we=Object(o["j"])({name:"Modal",data:function(){return{ModalName:Oe}},computed:Object(p["a"])(Object(p["a"])({},Object(K["d"])("app",[])),Object(K["d"])("ui",["modalShowing","currentModal"])),methods:{resumeSyncLoop:function(){console.log("foo"),this.$store.dispatch("ui/setCurrentModal",Oe.None),this.$store.dispatch("ui/setModalShowing",!1)}}});n("79b7");we.render=je,we.__scopeId="data-v-a7973084";var Se=we,ke=Object(o["j"])({name:"App",data:function(){return{HostingStatusType:z,showing:!1,icons:{flag:O["a"],openMenu:v["a"],closeMenu:h["a"]},fetchInterval:null,lastInteraction:Date.now()}},created:function(){this.fetchInterval=setInterval(this.synchronize,3e4),this.synchronize(),document.addEventListener("click",this.resetTimer),document.addEventListener("mousemove",this.resetTimer),document.addEventListener("scroll",this.resetTimer),document.addEventListener("keypress",this.resetTimer)},unmounted:function(){this.fetchInterval&&clearInterval(this.fetchInterval)},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(K["d"])("app",["hosting"])),Object(K["d"])("ui",["sidebarShowing"])),Object(K["c"])("app",["configIsValid","dataHasChanged"])),methods:Object(p["a"])(Object(p["a"])({},Object(K["b"])("ui",["toggleSidebarShowing"])),{},{resetTimer:function(){this.lastInteraction=Date.now()},publishChanges:function(){var e=this.$store.state.app,t=ue.formatPayloadFromState(e);ue.upload(t,e.hosting),this.$store.dispatch("app/setExistingFeatures",t)},synchronize:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$store.getters["app/configIsValid"](),!(Date.now()>e.lastInteraction+6e5)){t.next=6;break}e.$store.dispatch("ui/setCurrentModal",Oe.InactivityWarning),e.$store.dispatch("ui/setModalShowing",!0),t.next=12;break;case 6:if(!n){t.next=12;break}return t.next=9,ue.fetchExistingFeatures(e.$store.state.app.hosting);case 9:o=t.sent,console.log({result:o}),e.$store.dispatch("app/setExistingFeatures",o.data);case 12:case"end":return t.stop()}}),t)})))()}}),components:{Sidebar:de,Icon:b["a"],Modal:Se}});n("08d9");ke.render=g;var Ee=ke,Fe=n("9483");Object(Fe["a"])("".concat("/app/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var Ce=n("6c02"),xe=Object(o["L"])("data-v-2576f704");Object(o["v"])("data-v-2576f704");var Ie={class:"home"},Ne=Object(o["i"])("p",{class:"getting-started-intro prose"}," Getting started is easy. ",-1),Ae=Object(o["i"])("ol",{class:"getting-started-list"},[Object(o["i"])("li",null,"First, enter your hosting configuration. (S3, Azure, GCP, etc.)"),Object(o["i"])("li",null," Next, start creating your environments. (dev, staging, prod, etc.) "),Object(o["i"])("li",null,"Then, create your feature flags.")],-1);Object(o["t"])();var Re=xe((function(e,t,n,a,i,r){var c=Object(o["z"])("Icon");return Object(o["s"])(),Object(o["e"])("div",Ie,[Ne,Object(o["i"])(c,{icon:e.icons.flag,class:"logo"},null,8,["icon"]),Ae])})),Me=(n("c975"),n("a434"),n("f499")),Ve=n("612d"),Te={namespaced:!0,state:{features:[],featuresSettings:{},environments:[],hosting:{provider:null,config:null,status:null},defaultEnvironmentFeatureValues:{},existingFeatures:null},getters:{environmentByName:function(e){return function(t){return e.environments.find((function(e){return e.name===t}))}},featureByName:function(e){return function(t){return e.features.find((function(e){return e.name===t}))}},getFeatureSettings:function(e){return function(t,n,o){var a="".concat(t.name,"/").concat(n.name,"/").concat(o),i=e.featuresSettings[a];return i}},configIsValid:function(e){return function(){try{return ue.isConfigValid(e.hosting)}catch(t){return console.log("Error running isConfigValid",t),!1}}},dataHasChanged:function(e){return function(){return!Object(Ve["isEqual"])(e.existingFeatures,ue.formatPayloadFromState(e))}}},mutations:{addFeature:function(e,t){e.features.push(Object(p["a"])(Object(p["a"])({},t),{},{type:"toggle"})),e.environments.forEach((function(n){e.featuresSettings["".concat(t.name,"/").concat(n.name,"/toggle")]={value:e.defaultEnvironmentFeatureValues[n.name].toggle["value"]}}))},removeFeature:function(e,t){var n=e.features.indexOf(t);e.features.splice(n,1)},editFeature:function(e,t){var n=t.previous,o=t.current;if(o.type){var a=e.features.indexOf(n);e.features[a]=Object(p["a"])(Object(p["a"])({},n),o),e.environments.forEach((function(t){var n={},a=e.featuresSettings["".concat(o.name,"/").concat(t.name,"/").concat(o.type)];a&&(a["value"]||0===a["value"])||(n["value"]=e.defaultEnvironmentFeatureValues[t.name][o.type]["value"]),a&&("gradual"!==o.type||a["seed"]||0===a["seed"])||(n["seed"]=e.defaultEnvironmentFeatureValues[t.name][o.type]["seed"]),e.featuresSettings["".concat(o.name,"/").concat(t.name,"/").concat(o.type)]=Object(p["a"])(Object(p["a"])({},a),n)}))}},addEnvironment:function(e,t){e.environments.push(t),e.defaultEnvironmentFeatureValues[t.name]={toggle:{type:Me["VexillaFeatureType"].TOGGLE,value:!1},gradual:{type:Me["VexillaFeatureType"].GRADUAL,seed:.01,value:0},selective:{type:Me["VexillaFeatureType"].SELECTIVE}}},removeEnvironment:function(e,t){var n=e.environments.indexOf(t);e.environments.splice(n,1)},editEnvironment:function(e,t){var n=t.previous,o=t.current,a=e.environments.indexOf(n);e.features.forEach((function(t){e.featuresSettings["".concat(t.name,"/").concat(o.name,"/").concat(t.type)]=e.featuresSettings["".concat(t.name,"/").concat(n.name,"/").concat(t.type)],delete e.featuresSettings["".concat(t.name,"/").concat(n.name,"/").concat(t.type)]})),e.environments[a]=Object(p["a"])(Object(p["a"])({},n),o)},setFeatureSettings:function(e,t){var n=t.feature,o=t.environment,a=t.type,i=t.settings,r=e.featuresSettings["".concat(n.name,"/").concat(o.name,"/").concat(a)];e.featuresSettings["".concat(n.name,"/").concat(o.name,"/").concat(a)]=Object(p["a"])(Object(p["a"])({},r),i)},updateHostingProvider:function(e,t){e.hosting.provider=t},updateHostingConfig:function(e,t){e.hosting.config=t},updateDefaultFeatureValues:function(e,t){var n=t.environment,o=t.defaultValues;e.defaultEnvironmentFeatureValues[n.name]=o},setHostingStatus:function(e,t){e.hosting.status=t},setExistingFeatures:function(e,t){e.existingFeatures=t},importHostingAdapter:function(e,t){e.hosting=t}},actions:{addFeature:function(e,t){e.commit("addFeature",t)},removeFeature:function(e,t){e.commit("removeFeature",t)},editFeature:function(e,t){e.commit("editFeature",t)},addEnvironment:function(e,t){e.commit("addEnvironment",t)},removeEnvironment:function(e,t){e.commit("removeEnvironment",t)},editEnvironment:function(e,t){e.commit("editEnvironment",t)},setFeatureSettings:function(e,t){e.commit("setFeatureSettings",t)},updateHostingProvider:function(e,t){console.log({hostingProvider:t}),e.commit("updateHostingProvider",t)},updateHostingConfig:function(e,t){e.commit("updateHostingConfig",t)},updateDefaultEnvironmentValues:function(e,t){e.commit("updateDefaultFeatureValues",t)},setHostingStatus:function(e,t){console.log({status:t}),e.commit("setHostingStatus",t)},setExistingFeatures:function(e,t){e.commit("setExistingFeatures",t)},importHostingAdapter:function(e,t){e.commit("importHostingAdapter",t)}}},Le=n("0e44"),He=Object(K["a"])({modules:{app:Te,ui:ye},plugins:[Object(Le["a"])()]}),Pe=Object(o["j"])({name:"Home",store:He,data:function(){return{icons:{flag:O["a"]}}},components:{Icon:b["a"]}});n("8a03");Pe.render=Re,Pe.__scopeId="data-v-2576f704";var _e=Pe,Be=[{path:"/",name:"Home",component:_e},{path:"/environment/:name",name:"Environment",component:function(){return Promise.all([n.e("environment~feature"),n.e("environment")]).then(n.bind(null,"6ca2"))}},{path:"/feature/:name",name:"Feature",component:function(){return Promise.all([n.e("environment~feature"),n.e("feature")]).then(n.bind(null,"9a97"))}},{path:"/configuration",name:"Configuration",component:function(){return n.e("configuration").then(n.bind(null,"829a"))}}];console.log("NODE_ENV","production"),console.log("BASE_URL","/app/");var $e=Object(Ce["a"])({history:Object(Ce["b"])("/app/"),routes:Be}),De=$e;n("84df");Object(o["d"])(Ee).use(He).use(De).mount("#app")},dfbd:function(e,t,n){}});
//# sourceMappingURL=index.b45a50cb.js.map